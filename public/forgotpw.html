<!doctype html>
<head>
<script type="text/javascript" src="/public/jquery-1.9.1.min.js"></script>
</head>
<body style="margin-left:100px;" bgcolor="white">
<h2>
   <a href="http://www.translunardesigns.com" alt="Trans Lunar Designs" target="_blank" >
      <img src="/public/translunar.png" align="middle"/>REST Test
   </a>
</h2>
<h3>Forgot Password Test</h3>


<form name="inputForm" id="inputForm" method="get">
<table>
   <tr><td>ID:</td><td><input class="input" type="text" size="25" name="id" readonly></td></tr>
   <tr><td>Name:</td><td><input class="input" type="text" size="25" name="name" readonly></td></tr>
   <tr><td>Email:</td><td><input class="input" type="text" size="25" name="email" readonly></td></tr>
   <tr><td>Username:</td><td><input class="input" type="text" size="25" name="username" readonly></td></tr>
   <tr><td>
   <tr><td>Message text:</td><td><input class="input" type="text" name="message"></td></tr>

   <tr><td>
      <input id="formButton" type="button" value="Send Email">
      </td><td>
      <input id="clearFormButton" type="button" value="Clear Form">
   </td></tr>
</table>
</form>
<p>Default email configuration uses the Preview module to save emails in the [server home]/tmp/nodemailer directory</p>
<p>To change email settings in <b>config.js</b>, look at <a href="https://npmjs.org/package/nodemailer" target="_blank">Node Mailer</a></p>

<p><a href="/public/login.html">Login</a>&nbsp;&nbsp;&nbsp;&nbsp;
<a href="/public/update.html"><b>U</b>pdate User</a>&nbsp;&nbsp;&nbsp;&nbsp;
<a href="/public/index.html">Home</a></p>
<script type="text/javascript">
   $(document).ready(function() {
      $('#formButton').click(function() { formSubmit(); });
      $('#clearFormButton').click(function() { clearForm(); });
   });

   function formSubmit() {
      $.ajax({
         type: "POST",
         url: "http://localhost:3000/api/v1/email",
        data: {to : $('input[name="email"]').val(), subject:'Test email', message: $('input[name="message"]').val()},
         success: function(data) {
            alert("Email sent.");
         },
         error:function(err) {
            console.log(err);
            alert(JSON.parse(err.responseText).message)
         },
         dataType: 'json'
      });
   }


   function clearForm() {
      $('#inputForm')[0].reset();
   }
</script>

</body>
